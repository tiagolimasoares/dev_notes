<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questões de Fixação - Fato Típico: Conduta</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        /* Estilos Globais e Paleta de Cores */
        :root {
            --primary-blue: #0A3D62;
            --secondary-blue: #1E639B;
            --light-gray: #F0F2F5;
            --medium-gray: #D1D5DB;
            --dark-gray: #4B5563;
            --text-color: #1F2937;
            --success-green: #10B981;
            --error-red: #EF4444;
            --white: #FFFFFF;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--light-gray);
            color: var(--text-color);
            display: flex;
        }

        /* Estilo da Sidebar */
        #sidebar {
            width: 250px;
            background-color: var(--primary-blue);
            color: var(--white);
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            padding: 2rem 1rem;
            transition: width 0.3s;
            overflow-y: auto;
            z-index: 1000;
        }

        #sidebar h2 {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--secondary-blue);
            padding-bottom: 1rem;
        }

        #sidebar ul {
            list-style: none;
            padding: 0;
        }

        #sidebar ul li a {
            display: block;
            padding: 0.8rem 1rem;
            margin-bottom: 0.5rem;
            border-radius: 8px;
            text-decoration: none;
            color: var(--white);
            transition: background-color 0.3s, color 0.3s;
            font-weight: 500;
        }

        #sidebar ul li a:hover, #sidebar ul li a.active {
            background-color: var(--white);
            color: var(--primary-blue);
        }

        /* Conteúdo Principal */
        #main-content {
            margin-left: 250px;
            padding: 2rem 3rem;
            width: calc(100% - 250px);
            transition: margin-left 0.3s, width 0.3s;
        }

        /* Estilo dos Cards de Questão */
        .question-card {
            background-color: var(--white);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-left: 5px solid var(--primary-blue);
        }

        .question-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
        }

        /* Estilo das Alternativas */
        .option {
            display: flex;
            align-items: center;
            padding: 1rem;
            border: 1px solid var(--medium-gray);
            border-radius: 8px;
            margin-bottom: 0.75rem;
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s;
            position: relative;
        }

        .option:hover {
            background-color: #EBF5FF;
            border-color: var(--secondary-blue);
        }
        
        .option.correct {
            background-color: var(--success-green);
            color: var(--white);
            border-color: #059669;
        }

        .option.incorrect {
            background-color: var(--error-red);
            color: var(--white);
            border-color: #DC2626;
        }
        
        .option.eliminated {
            text-decoration: line-through;
            background-color: var(--medium-gray);
            opacity: 0.6;
            cursor: not-allowed;
        }

        .option-letter {
            font-weight: bold;
            margin-right: 1rem;
            min-width: 20px;
        }
        
        .scissor-icon {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: var(--dark-gray);
            transition: color 0.2s;
        }
        
        .scissor-icon:hover {
            color: var(--error-red);
        }
        .option.eliminated .scissor-icon, .option.correct .scissor-icon, .option.incorrect .scissor-icon {
            display: none;
        }

        /* Estilo do Feedback */
        .feedback {
            margin-top: 1.5rem;
            padding: 1.5rem;
            border-radius: 8px;
            display: none;
        }

        .feedback.correct {
            background-color: #D1FAE5;
            border-left: 5px solid var(--success-green);
            display: block;
        }

        .feedback.incorrect {
            background-color: #FEE2E2;
            border-left: 5px solid var(--error-red);
            display: block;
        }
        
        .feedback-title {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }
        
        .feedback-explanation {
            line-height: 1.6;
        }
        
        .feedback-example {
            margin-top: 1rem;
            padding: 1rem;
            background-color: #f3f4f6;
            border-radius: 6px;
            border-left: 3px solid var(--secondary-blue);
        }

        /* Seção de Relatório */
        #report-section {
            background-color: var(--white);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        #review-section {
            margin-top: 2rem;
        }

        .review-card {
            background-color: #FFFBEB;
            border: 1px solid #FBBF24;
            border-left: 5px solid #F59E0B;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
    </style>
</head>
<body>

    <div id="sidebar">
        <h2>Direito Penal</h2>
        <ul>
            <li><a href="#quiz-section" onclick="scrollToSection('quiz-section')" class="active">Questões</a></li>
            <li><a href="#report-section" onclick="scrollToSection('report-section')">Relatório</a></li>
        </ul>
    </div>

    <div id="main-content">
        <h1 class="text-3xl font-bold mb-2 text-[var(--primary-blue)]">Questões de Fixação: Fato Típico - Conduta</h1>
        <p class="mb-8 text-[var(--dark-gray)]">Aula 17 - Analise cada questão e selecione a alternativa correta. Use o ícone de tesoura <i class="fas fa-cut"></i> para eliminar as alternativas que julgar incorretas.</p>

        <div id="quiz-section">
            <!-- As questões serão inseridas aqui via JavaScript -->
        </div>

        <div id="report-section" class="hidden">
            <h2 class="text-2xl font-bold mb-6 text-[var(--primary-blue)]">Relatório de Desempenho</h2>
            <div class="w-full md:w-1/2 mx-auto mb-8">
                <canvas id="performance-chart"></canvas>
            </div>
            <div id="review-section">
                <!-- A revisão dos erros será inserida aqui -->
            </div>
        </div>
    </div>

    <script>
    // DOCUMENTAÇÃO GERAL DO SCRIPT (JavaScript)
    // Módulo da Aula 17: Conduta.
    // O script mantém a estrutura interativa anterior, agora populado com questões e explicações detalhadas sobre as teorias da conduta e suas excludentes.
    // As "mini-aulas" foram elaboradas para cobrir integralmente o conteúdo do PDF, com foco na aplicação prática.

    const questions = [
        {
            question: "A teoria finalista da ação, desenvolvida por Hans Welzel e adotada pela doutrina majoritária, trouxe uma mudança fundamental na estrutura do crime em relação à teoria causalista. Qual foi a principal inovação da teoria finalista?",
            options: [
                "Considerar a conduta como um simples movimento corporal voluntário, sem analisar sua finalidade.",
                "Manter o dolo e a culpa como elementos da culpabilidade, mas com uma nova roupagem normativa.",
                "Transferir o dolo e a culpa, que antes integravam a culpabilidade, para dentro do fato típico, como elementos da conduta.",
                "Definir a conduta como um comportamento humano voluntário e ilícito, valorado negativamente pelo legislador.",
                "Extinguir a análise do dolo, focando apenas na causalidade objetiva entre a ação e o resultado."
            ],
            answer: 2,
            explanation:
                '<div class="feedback-explanation">' +
                    '<p><strong>Mini-Aula sobre a Alternativa Correta (C):</strong></p>' +
                    '<p>A grande revolução da <strong>teoria finalista</strong> foi afirmar que toda conduta humana é dirigida a um fim (uma finalidade). Não existe um "querer" neutro. Por isso, não faria sentido analisar a conduta (1º degrau do crime) sem analisar a sua finalidade (o dolo ou a culpa).</p>' +
                    '<ul>' +
                        '<li class="mt-2"><strong>- Teoria Causalista (superada):</strong> Via a conduta como um mero movimento mecânico. O dolo e a culpa eram analisados apenas no final, na culpabilidade.</li>' +
                        '<li class="mt-1"><strong>- Teoria Finalista (adotada):</strong> "Puxou" o dolo e a culpa para o início da análise. A conduta já nasce dolosa ou culposa. Assim, <strong>dolo e culpa passam a integrar o fato típico</strong>, especificamente dentro do elemento conduta.</li>' +
                    '</ul>' +
                '</div>' +
                '<div class="feedback-example">' +
                    '<p><strong>Exemplo Prático:</strong> Alguém aperta um gatilho (movimento). Para o causalismo, isso era a conduta. Só na culpabilidade se perguntaria se houve intenção. Para o finalismo, o ato de apertar o gatilho já é analisado com sua finalidade: foi para matar (conduta dolosa) ou foi um disparo acidental por falta de cuidado (conduta culposa)? Essa análise ocorre logo no início, no fato típico.</p>' +
                '</div>' +
                '<p class="mt-3 text-sm text-gray-600"><em>Referência: Aula 17, p. 4</em></p>',
            topic: "Teoria Finalista da Ação"
        },
        {
            question: "A coação física irresistível (vis absoluta) e a coação moral irresistível (vis compulsiva) são institutos que afastam a responsabilidade penal, mas atuam em estratos diferentes do crime. Assinale a alternativa que apresenta a distinção correta entre elas.",
            options: [
                "Ambas excluem a culpabilidade, por inexigibilidade de conduta diversa.",
                "A coação física exclui a culpabilidade, enquanto a coação moral exclui o fato típico.",
                "A coação física irresistível exclui a própria conduta (e, por consequência, o fato típico), enquanto a coação moral irresistível exclui a culpabilidade.",
                "Ambas excluem a ilicitude da conduta, sendo consideradas causas de justificação.",
                "A coação física é uma causa de exclusão da tipicidade formal, e a moral, da tipicidade material."
            ],
            answer: 2,
            explanation:
                '<div class="feedback-explanation">' +
                    '<p><strong>Mini-Aula sobre a Alternativa Correta (C):</strong></p>' +
                    '<p>Esta é uma das distinções mais importantes e cobradas em provas. O segredo é entender sobre qual aspecto da vontade a coação atua.</p>' +
                    '<ul>' +
                        '<li class="mt-2"><strong>- Coação FÍSICA Irresistível (Vis Absoluta):</strong> A força física externa é tão grande que <strong>elimina completamente a vontade</strong> do coagido. Ele não age, mas é "agido". Seu corpo é um mero instrumento. Se não há vontade, não há conduta. Se não há conduta, não há fato típico. O problema é resolvido no <strong>primeiro degrau</strong> do crime.</li>' +
                        '<li class="mt-1"><strong>- Coação MORAL Irresistível (Vis Compulsiva):</strong> Aqui, o agente sofre uma grave ameaça. Ele ainda tem uma escolha (ceder à ameaça ou sofrer o mal prometido), mas sua vontade está <strong>viciada</strong>, não é livre. Ele pratica uma conduta voluntária e finalista, então há fato típico e ilícito. Contudo, o direito não pode exigir que ele agisse de outro modo. A coação exclui a <strong>culpabilidade</strong>, por inexigibilidade de conduta diversa. O problema é resolvido no <strong>terceiro degrau</strong>.</li>' +
                    '</ul>' +
                '</div>' +
                '<div class="feedback-example">' +
                    '<p><strong>Exemplo Prático:</strong><br><strong>Física:</strong> Um segurança forte pega a mão de um caixa de banco à força e a utiliza para digitar a senha do cofre. O caixa não praticou conduta. Fato atípico.<br><strong>Moral:</strong> Um criminoso aponta uma arma para a cabeça do filho do caixa e ordena que ele digite a senha. O caixa digita. Ele praticou uma conduta (fato típico e ilícito), mas não será punido por ausência de culpabilidade.</p>' +
                '</div>' +
                '<p class="mt-3 text-sm text-gray-600"><em>Referência: Aula 17, p. 6-7</em></p>',
            topic: "Distinção: Coação Física x Coação Moral"
        },
        {
            question: "Segundo o material, nem todo comportamento que causa um resultado lesivo é considerado uma conduta para o Direito Penal. Qual das seguintes situações representa uma causa de exclusão da conduta por ausência de voluntariedade?",
            options: [
                "Agressão física cometida em um ataque de fúria, após descobrir uma traição.",
                "Movimento de chute executado por um paciente durante um exame de reflexo patelar, que atinge o médico.",
                "Embriaguez voluntária em que o agente perde a consciência e comete um crime.",
                "Ação praticada sob o efeito de violenta emoção.",
                "Um motorista que, por negligência, se distrai com o celular e causa um acidente."
            ],
            answer: 1,
            explanation:
                '<div class="feedback-explanation">' +
                    '<p><strong>Mini-Aula sobre a Alternativa Correta (B):</strong></p>' +
                    '<p>A conduta penalmente relevante exige <strong>consciência e voluntariedade</strong>. Atos puramente mecânicos, sobre os quais o agente não tem controle, não são considerados conduta.</p>' +
                    '<ul>' +
                        '<li class="mt-2"><strong>- Movimento Reflexo (Alternativa B):</strong> É uma reação motora automática a um estímulo, sem qualquer participação da vontade ou do cérebro. É o exemplo perfeito de ausência de conduta por involuntariedade.</li>' +
                        '<li class="mt-1"><strong>- Ações em Curto-Circuito (Alternativa A):</strong> São reações explosivas e momentâneas, mas ainda assim existe um resquício de vontade, uma voluntariedade no ato. Portanto, <strong>há conduta</strong> e o agente responde pelo resultado, podendo a emoção influenciar apenas na dosimetria da pena.</li>' +
                        '<li class="mt-1"><strong>- Embriaguez Voluntária (Alternativa C):</strong> Pela teoria da <i>actio libera in causa</i>, a análise da voluntariedade é feita no momento em que o agente se colocou em estado de inconsciência. Como ele bebeu voluntariamente, responde pelo crime. Não exclui a conduta.</li>' +
                    '</ul>' +
                '</div>' +
                '<div class="feedback-example">' +
                    '<p><strong>Exemplo Prático:</strong> Se uma pessoa, ao ser picada por uma abelha, tem um espasmo muscular involuntário e seu braço atinge o rosto de outra, não há crime de lesão corporal por ausência de conduta. O movimento foi um ato reflexo. Diferente seria se, irritado com a abelha, ele desse um tapa para matá-la e, nesse movimento, atingisse a outra pessoa; aqui haveria conduta (culposa).</p>' +
                '</div>' +
                '<p class="mt-3 text-sm text-gray-600"><em>Referência: Aula 17, p. 5</em></p>',
            topic: "Causas de Exclusão da Conduta (Ato Reflexo)"
        },
        {
            question: "As chamadas 'ações em curto-circuito' são reações explosivas e momentâneas, provocadas por emoções violentas. Do ponto de vista da teoria do crime, qual é a consequência jurídica de uma ação praticada em curto-circuito?",
            options: [
                "Excluem a conduta, pois o agente não tem controle sobre seus atos.",
                "Não excluem a conduta, pois são dotadas de voluntariedade, podendo a emoção atuar, no máximo, como causa de diminuição de pena ou privilégio.",
                "Excluem a culpabilidade, por se equipararem à coação moral irresistível.",
                "Tornam o fato atípico, por ausência de dolo.",
                "Excluem a ilicitude, por serem uma forma de legítima defesa."
            ],
            answer: 1,
            explanation:
                '<div class="feedback-explanation">' +
                    '<p><strong>Mini-Aula sobre a Alternativa Correta (B):</strong></p>' +
                    '<p>É fundamental não confundir um ato reflexo (sem vontade) com uma reação impulsiva (com vontade, ainda que viciada pela emoção). As <strong>ações em curto-circuito</strong>, apesar de explosivas, não eliminam a voluntariedade. O agente "escolhe" reagir daquela forma, mesmo que de maneira quase instantânea.</p>' +
                    '<p>Por essa razão, <strong>HÁ CONDUTA</strong> e, consequentemente, há fato típico. O ordenamento jurídico leva em conta essa explosão emocional, mas em outro momento da análise do crime: a emoção pode configurar uma <strong>causa de diminuição de pena</strong> (ex: homicídio privilegiado pelo domínio de violenta emoção) ou uma <strong>atenuante genérica</strong>, mas jamais excluirá a conduta.</p>' +
                '</div>' +
                '<div class="feedback-example">' +
                    '<p><strong>Exemplo Prático:</strong> Um motorista leva uma "fechada" no trânsito. Num rompante de fúria (ação em curto-circuito), ele joga seu carro contra o outro. Houve conduta, pois ele direcionou o carro com a finalidade de colidir. Ele responderá pelo crime de dano (e lesão, se houver). Sua fúria não o isenta do crime, diferente de um espasmo que o fizesse perder o controle do veículo.</p>' +
                '</div>' +
                '<p class="mt-3 text-sm text-gray-600"><em>Referência: Aula 17, p. 5-6</em></p>',
            topic: "Ações em Curto-Circuito"
        },
        {
            question: "Em relação às causas de exclusão da conduta, qual é o tratamento dado pela lei penal à embriaguez completa que leva o indivíduo a um estado de inconsciência?",
            options: [
                "Sempre exclui a conduta, pois o agente está inconsciente no momento do fato.",
                "Exclui a conduta apenas se a embriaguez for preordenada, ou seja, com a intenção de cometer o crime.",
                "Em regra, não exclui a conduta, a menos que seja proveniente de caso fortuito ou força maior.",
                "Sempre exclui a culpabilidade, mas nunca a conduta.",
                "Transforma o crime doloso em culposo."
            ],
            answer: 2,
            explanation:
                '<div class="feedback-explanation">' +
                    '<p><strong>Mini-Aula sobre a Alternativa Correta (C):</strong></p>' +
                    '<p>A embriaguez é um tema clássico e sua regra é a da <strong>Teoria da <i>Actio Libera in Causa</i></strong> (ação livre na causa). O Direito Penal, para evitar que a embriaguez se tornasse uma desculpa para o cometimento de crimes, estabeleceu que a análise da voluntariedade não é feita no momento do crime (quando o agente pode estar inconsciente), mas sim no momento em que ele <strong>decidiu se embriagar</strong>.</p>' +
                    '<ul>' +
                        '<li class="mt-2"><strong>- Regra:</strong> Se a embriaguez foi voluntária (quis beber) ou culposa (bebeu sem moderação e ficou bêbado sem querer), o agente responde pelo crime. A conduta não é excluída.</li>' +
                        '<li class="mt-1"><strong>- Exceção:</strong> A responsabilidade é afastada <strong>apenas</strong> se a embriaguez for completa e acidental, decorrente de <strong>caso fortuito</strong> (ex: bebeu um líquido pensando ser água, mas era cachaça) ou <strong>força maior</strong> (ex: foi forçado a beber sob ameaça). Nesses casos específicos, a conduta pode ser excluída.</li>' +
                    '</ul>' +
                '</div>' +
                '<div class="feedback-example">' +
                    '<p><strong>Exemplo Prático:</strong> João decide beber para "criar coragem" de matar seu desafeto. Ele fica completamente bêbado e comete o homicídio. Ele responderá normalmente pelo crime. A análise da sua vontade de matar é "transferida" para o momento em que ele decidiu beber para cometer o crime.</p>' +
                '</div>' +
                '<p class="mt-3 text-sm text-gray-600"><em>Referência: Aula 17, p. 5</em></p>',
            topic: "Exclusão da Conduta e Embriaguez"
        }
    ];

    const userAnswers = new Array(questions.length).fill(null);
    const quizContainer = document.getElementById('quiz-section');
    const reportSection = document.getElementById('report-section');
    let performanceChart = null;

    function renderQuestions() {
        let quizHTML = '';
        questions.forEach((q, index) => {
            quizHTML +=
                '<div class="question-card" id="question-' + index + '">' +
                    '<p class="question-title">' + (index + 1) + '. ' + q.question + '</p>' +
                    '<div class="options-container">';
            q.options.forEach((option, optionIndex) => {
                quizHTML +=
                    '<div class="option" data-question="' + index + '" data-option="' + optionIndex + '">' +
                        '<span class="option-letter">' + String.fromCharCode(65 + optionIndex) + '</span>' +
                        '<span class="option-text">' + option + '</span>' +
                        '<i class="fas fa-cut scissor-icon" title="Eliminar alternativa"></i>' +
                    '</div>';
            });
            quizHTML +=
                    '</div>' +
                    '<div class="feedback" id="feedback-' + index + '"></div>' +
                '</div>';
        });
        quizContainer.innerHTML = quizHTML;
        addEventListeners();
    }

    function addEventListeners() {
        document.querySelectorAll('.option').forEach(option => {
            option.addEventListener('click', handleOptionSelect);
        });
        document.querySelectorAll('.scissor-icon').forEach(icon => {
            icon.addEventListener('click', handleEliminateOption);
        });
    }

    function handleEliminateOption(e) {
        e.stopPropagation();
        const optionDiv = e.target.parentElement;
        if (!optionDiv.classList.contains('eliminated') && userAnswers[optionDiv.dataset.question] === null) {
            optionDiv.classList.add('eliminated');
        }
    }

    function handleOptionSelect(e) {
        const selectedOption = e.currentTarget;
        const questionIndex = parseInt(selectedOption.dataset.question);
        const optionIndex = parseInt(selectedOption.dataset.option);

        if (userAnswers[questionIndex] !== null || selectedOption.classList.contains('eliminated')) {
            return;
        }

        const isCorrect = optionIndex === questions[questionIndex].answer;
        userAnswers[questionIndex] = { answered: optionIndex, correct: isCorrect };

        const optionsContainer = selectedOption.parentElement;
        optionsContainer.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));

        selectedOption.classList.add(isCorrect ? 'correct' : 'incorrect');
        
        optionsContainer.querySelectorAll('.scissor-icon').forEach(icon => icon.style.display = 'none');

        showFeedback(questionIndex, isCorrect);
        
        if (userAnswers.every(answer => answer !== null)) {
            reportSection.classList.remove('hidden');
            generateReport();
            scrollToSection('report-section');
        }
    }

    function showFeedback(questionIndex, isCorrect) {
        const feedbackDiv = document.getElementById('feedback-' + questionIndex);
        const questionData = questions[questionIndex];
        
        let feedbackHTML = 
            '<p class="feedback-title">' + (isCorrect ? 'Resposta Correta! Análise do Professor:' : 'Resposta Incorreta. Análise do Professor:') + '</p>' +
            '<div>' + questionData.explanation + '</div>';
        
        feedbackDiv.innerHTML = feedbackHTML;
        feedbackDiv.className = 'feedback ' + (isCorrect ? 'correct' : 'incorrect');
    }
    
    function generateReport() {
        const correctAnswers = userAnswers.filter(a => a.correct).length;
        const incorrectAnswers = questions.length - correctAnswers;

        const ctx = document.getElementById('performance-chart').getContext('2d');
        if (performanceChart) {
            performanceChart.destroy();
        }
        performanceChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Acertos', 'Erros'],
                datasets: [{
                    data: [correctAnswers, incorrectAnswers],
                    backgroundColor: ['var(--success-green)', 'var(--error-red)'],
                    borderColor: ['var(--white)'],
                    borderWidth: 4
                }]
            },
            options: {
                responsive: true,
                cutout: '70%',
                plugins: {
                    legend: { position: 'bottom', labels: { font: { size: 14 }, padding: 20 } },
                    title: { display: true, text: 'Seu Desempenho Geral', font: { size: 18, weight: 'bold' }, padding: { bottom: 20 } }
                }
            }
        });

        const reviewSection = document.getElementById('review-section');
        let reviewHTML = '<h3 class="text-xl font-bold mb-4 text-[var(--primary-blue)]">Pontos para Revisão</h3>';
        const incorrectQuestions = userAnswers
            .map((answer, index) => ({...answer, index}))
            .filter(answer => !answer.correct);

        if (incorrectQuestions.length === 0) {
            reviewHTML += '<p class="text-lg text-[var(--success-green)] font-semibold">Fantástico! Você demonstrou domínio sobre o tema Conduta. Mantenha o foco e a disciplina.</p>';
        } else {
            reviewHTML += '<p class="mb-4 text-[var(--dark-gray)]">Você errou ' + incorrectQuestions.length + ' questão(ões). A excelência está na correção dos desvios. Revise estes tópicos:</p>';
            incorrectQuestions.forEach(q => {
                const originalQuestion = questions[q.index];
                reviewHTML +=
                    '<div class="review-card">' +
                        '<h4 class="font-bold text-lg mb-2 text-[#D97706]">' + originalQuestion.topic + '</h4>' +
                        '<p class="mb-3"><strong>Na questão:</strong> "' + originalQuestion.question + '"</p>' +
                        '<p class="font-semibold">Relembre o ponto-chave:</p>' +
                        originalQuestion.explanation +
                    '</div>';
            });
        }
        reviewSection.innerHTML = reviewHTML;
    }

    function scrollToSection(sectionId) {
        document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
    }

    window.addEventListener('scroll', () => {
        const sections = ['quiz-section', 'report-section'];
        let currentSection = '';

        sections.forEach(sectionId => {
            const section = document.getElementById(sectionId);
            if (section) {
                const rect = section.getBoundingClientRect();
                if (rect.top <= 150 && rect.bottom >= 150) {
                    currentSection = sectionId;
                }
            }
        });
        
        const sidebarLinks = document.querySelectorAll('#sidebar ul li a');
        sidebarLinks.forEach(link => {
            link.classList.remove('active');
            if(link.getAttribute('href') === '#' + currentSection) {
                link.classList.add('active');
            }
        });
    });

    document.addEventListener('DOMContentLoaded', renderQuestions);
    </script>

</body>
</html>
