<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questões de Fixação - Fato Típico</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        /* Estilos Globais e Paleta de Cores */
        :root {
            --primary-blue: #0A3D62;
            --secondary-blue: #1E639B;
            --light-gray: #F0F2F5;
            --medium-gray: #D1D5DB;
            --dark-gray: #4B5563;
            --text-color: #1F2937;
            --success-green: #10B981;
            --error-red: #EF4444;
            --white: #FFFFFF;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--light-gray);
            color: var(--text-color);
            display: flex;
        }

        /* Estilo da Sidebar */
        #sidebar {
            width: 250px;
            background-color: var(--primary-blue);
            color: var(--white);
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            padding: 2rem 1rem;
            transition: width 0.3s;
            overflow-y: auto;
            z-index: 1000;
        }

        #sidebar h2 {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--secondary-blue);
            padding-bottom: 1rem;
        }

        #sidebar ul {
            list-style: none;
            padding: 0;
        }

        #sidebar ul li a {
            display: block;
            padding: 0.8rem 1rem;
            margin-bottom: 0.5rem;
            border-radius: 8px;
            text-decoration: none;
            color: var(--white);
            transition: background-color 0.3s, color 0.3s;
            font-weight: 500;
        }

        #sidebar ul li a:hover, #sidebar ul li a.active {
            background-color: var(--white);
            color: var(--primary-blue);
        }

        /* Conteúdo Principal */
        #main-content {
            margin-left: 250px;
            padding: 2rem 3rem;
            width: calc(100% - 250px);
            transition: margin-left 0.3s, width 0.3s;
        }

        /* Estilo dos Cards de Questão */
        .question-card {
            background-color: var(--white);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-left: 5px solid var(--primary-blue);
        }

        .question-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
        }

        /* Estilo das Alternativas */
        .option {
            display: flex;
            align-items: center;
            padding: 1rem;
            border: 1px solid var(--medium-gray);
            border-radius: 8px;
            margin-bottom: 0.75rem;
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s;
            position: relative;
        }

        .option:hover {
            background-color: #EBF5FF; /* Um azul bem claro */
            border-color: var(--secondary-blue);
        }
        
        .option.correct {
            background-color: var(--success-green);
            color: var(--white);
            border-color: #059669;
        }

        .option.incorrect {
            background-color: var(--error-red);
            color: var(--white);
            border-color: #DC2626;
        }
        
        .option.eliminated {
            text-decoration: line-through;
            background-color: var(--medium-gray);
            opacity: 0.6;
            cursor: not-allowed;
        }

        .option-letter {
            font-weight: bold;
            margin-right: 1rem;
            min-width: 20px;
        }
        
        .scissor-icon {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: var(--dark-gray);
            transition: color 0.2s;
        }
        
        .scissor-icon:hover {
            color: var(--error-red);
        }
        .option.eliminated .scissor-icon, .option.correct .scissor-icon, .option.incorrect .scissor-icon {
            display: none;
        }

        /* Estilo do Feedback */
        .feedback {
            margin-top: 1.5rem;
            padding: 1.5rem;
            border-radius: 8px;
            display: none; /* Começa oculto */
        }

        .feedback.correct {
            background-color: #D1FAE5;
            border-left: 5px solid var(--success-green);
            display: block;
        }

        .feedback.incorrect {
            background-color: #FEE2E2;
            border-left: 5px solid var(--error-red);
            display: block;
        }
        
        .feedback-title {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }
        
        .feedback-explanation {
            line-height: 1.6;
        }
        
        .feedback-example {
            margin-top: 1rem;
            padding: 1rem;
            background-color: #f3f4f6;
            border-radius: 6px;
            border-left: 3px solid var(--secondary-blue);
        }

        /* Seção de Relatório */
        #report-section {
            background-color: var(--white);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        #review-section {
            margin-top: 2rem;
        }

        .review-card {
            background-color: #FFFBEB;
            border: 1px solid #FBBF24;
            border-left: 5px solid #F59E0B;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
    </style>
</head>
<body>

    <div id="sidebar">
        <h2>Direito Penal</h2>
        <ul>
            <li><a href="#quiz-section" onclick="scrollToSection('quiz-section')" class="active">Questões</a></li>
            <li><a href="#report-section" onclick="scrollToSection('report-section')">Relatório</a></li>
        </ul>
    </div>

    <div id="main-content">
        <h1 class="text-3xl font-bold mb-2 text-[var(--primary-blue)]">Questões de Fixação: Fato Típico</h1>
        <p class="mb-8 text-[var(--dark-gray)]">Aula 16 - Analise cada questão e selecione a alternativa correta. Use o ícone de tesoura <i class="fas fa-cut"></i> para eliminar as alternativas que julgar incorretas.</p>

        <div id="quiz-section">
            <!-- As questões serão inseridas aqui via JavaScript -->
        </div>

        <div id="report-section" class="hidden">
            <h2 class="text-2xl font-bold mb-6 text-[var(--primary-blue)]">Relatório de Desempenho</h2>
            <div class="w-full md:w-1/2 mx-auto mb-8">
                <canvas id="performance-chart"></canvas>
            </div>
            <div id="review-section">
                <!-- A revisão dos erros será inserida aqui -->
            </div>
        </div>
    </div>

    <script>
    // DOCUMENTAÇÃO GERAL DO SCRIPT (JavaScript)
    // Este script foi atualizado para a Aula 16, com foco em Fato Típico.
    // As principais funcionalidades foram mantidas, mas o conteúdo (questões e explicações) foi completamente reformulado.
    // As explicações agora seguem um formato de "mini-aula", com análise detalhada e exemplos práticos, conforme solicitado.
    // CORREÇÃO: As strings de explicação foram convertidas de template literals para concatenação de strings para evitar erros de sintaxe.

    const questions = [
        {
            question: "A doutrina apresenta três conceitos de crime: material, formal e analítico. Qual deles define o crime como uma conduta humana que lesa ou expõe a perigo bens jurídicos penalmente tutelados, sendo considerado um conceito pré-jurídico?",
            options: [
                "Conceito analítico",
                "Conceito formal",
                "Conceito material",
                "Conceito legal",
                "Conceito dogmático"
            ],
            answer: 2,
            explanation:
                '<div class="feedback-explanation">' +
                    '<p><strong>Mini-Aula sobre a Alternativa Correta (C):</strong></p>' +
                    '<p>O <strong>conceito material</strong> (ou substancial) de crime busca responder à pergunta: "O que a sociedade considera como crime?". Ele se afasta da mera letra da lei para focar na essência da conduta: a ofensa (lesão ou perigo de lesão) a um bem jurídico fundamental para a convivência social (vida, patrimônio, liberdade, etc.). Por isso, é chamado de <strong>pré-jurídico</strong>, pois orienta o legislador na escolha de quais condutas devem ser criminalizadas.</p>' +
                    '<ul>' +
                        '<li class="mt-2"><strong>- Conceito Formal/Legal:</strong> É a simples adequação da conduta à lei penal. Crime é o que a lei diz que é crime.</li>' +
                        '<li class="mt-1"><strong>- Conceito Analítico/Dogmático:</strong> É o conceito técnico-jurídico, que decompõe o crime em seus elementos estruturais (Fato Típico, Ilicitude e Culpabilidade, na teoria tripartida).</li>' +
                    '</ul>' +
                '</div>' +
                '<div class="feedback-example">' +
                    '<p><strong>Exemplo Prático:</strong> Imagine que o legislador está decidindo se deve ou não criminalizar a conduta de "furar fila". Pelo <strong>conceito material</strong>, ele avaliaria se essa conduta causa uma lesão grave o suficiente a um bem jurídico (como a isonomia ou a paz social) para justificar a intervenção do Direito Penal, que é a <i>ultima ratio</i>. Provavelmente, concluiria que não, tratando-se de um mero ilícito social ou administrativo, e não de um crime.</p>' +
                '</div>' +
                '<p class="mt-3 text-sm text-gray-600"><em>Referência: Aula 16, p. 2</em></p>',
            topic: "Conceitos de Crime (Material, Formal e Analítico)"
        },
        {
            question: "Considerando a estrutura do crime, a teoria majoritariamente adotada pelas bancas examinadoras e pela doutrina brasileira é a tripartida. Quais são os três elementos que, em sequência lógica, a compõem?",
            options: [
                "Fato Típico, Culpabilidade e Punibilidade.",
                "Conduta, Ilicitude e Culpabilidade.",
                "Fato Típico, Ilicitude e Culpabilidade.",
                "Fato Típico e Ilicitude, sendo a culpabilidade um pressuposto da pena.",
                "Tipicidade, Antijuridicidade e Punibilidade."
            ],
            answer: 2,
            explanation:
                '<div class="feedback-explanation">' +
                    '<p><strong>Mini-Aula sobre a Alternativa Correta (C):</strong></p>' +
                    '<p>A <strong>teoria tripartida</strong>, que é a regra em concursos, define o crime como um <strong>Fato Típico, Ilícito e Culpável</strong>. Esses elementos formam uma estrutura analítica e sequencial, conhecida como a "Escada do Crime".</p>' +
                    '<ul>' +
                        '<li class="mt-2"><strong>1º Degrau (Fato Típico):</strong> Analisa-se se a conduta se encaixa perfeitamente em um tipo penal (conduta, resultado, nexo, tipicidade).</li>' +
                        '<li class="mt-1"><strong>2º Degrau (Ilicitude/Antijuridicidade):</strong> Verifica-se se essa conduta típica é contrária ao direito, ou seja, se não há uma causa que a justifique (legítima defesa, estado de necessidade, etc.).</li>' +
                        '<li class="mt-1"><strong>3º Degrau (Culpabilidade):</strong> Por fim, analisa-se se o agente pode ser responsabilizado por esse fato típico e ilícito (se era imputável, tinha potencial consciência da ilicitude e se era exigível conduta diversa).</li>' +
                    '</ul>' +
                    '<p>A alternativa D descreve a teoria bipartida, e as demais misturam elementos com consequências do crime (punibilidade).</p>' +
                '</div>' +
                '<div class="feedback-example">' +
                    '<p><strong>Exemplo Prático:</strong> João mata Pedro. Para condenar João por homicídio, o promotor precisa provar: <strong>1) Fato Típico:</strong> a conduta de João (atirar) causou o resultado morte, e isso se amolda ao art. 121 do CP. <strong>2) Ilicitude:</strong> João não agiu em legítima defesa ou outra excludente. <strong>3) Culpabilidade:</strong> João era maior de 18 anos, mentalmente são e não estava sob coação irresistível. Se faltar qualquer um desses degraus, não há crime.</p>' +
                '</div>' +
                '<p class="mt-3 text-sm text-gray-600"><em>Referência: Aula 16, p. 2-3</em></p>',
            topic: "Teorias dos Elementos do Crime (Tripartida)"
        },
        {
            question: "A \"Escada do Crime\" é uma analogia didática para a análise dos elementos do crime. Com base nesse conceito, é correto afirmar que:",
            options: [
                "A análise dos elementos é independente, podendo-se verificar a culpabilidade antes do fato típico.",
                "A ausência de ilicitude (antijuridicidade) não impede a análise da culpabilidade, pois são esferas distintas.",
                "Um fato pode ser culpável mesmo que não seja típico.",
                "Só se pode analisar a ilicitude de um fato se ele for típico, e a culpabilidade de um fato se ele for típico e ilícito.",
                "A escada do crime é composta por apenas dois degraus: fato típico e ilicitude."
            ],
            answer: 3,
            explanation:
                '<div class="feedback-explanation">' +
                    '<p><strong>Mini-Aula sobre a Alternativa Correta (D):</strong></p>' +
                    '<p>A analogia da "Escada do Crime" ilustra perfeitamente a <strong>relação de subsidiariedade e dependência</strong> entre os elementos do crime na teoria tripartida. Você só "sobe" para o degrau seguinte se tiver pisado firmemente no anterior. Portanto:</p>' +
                    '<ul>' +
                        '<li class="mt-2"><strong>- Não há ilicitude sem fato típico:</strong> Não se pergunta se uma conduta é permitida ou proibida pelo Direito se ela sequer é descrita como crime.</li>' +
                        '<li class="mt-1"><strong>- Não há culpabilidade sem fato típico e ilícito:</strong> Não se pergunta se um agente pode ser responsabilizado por uma conduta que não é crime (ou porque é atípica, ou porque foi justificada por uma excludente de ilicitude).</li>' +
                    '</ul>' +
                    '<p>A análise é, portanto, sequencial e eliminatória. Se a análise para no primeiro degrau (fato atípico), o processo acaba ali.</p>' +
                '</div>' +
                '<div class="feedback-example">' +
                    '<p><strong>Exemplo Prático:</strong> Um médico realiza uma cirurgia de emergência para salvar um paciente, causando-lhe uma lesão (corte). <strong>1) Fato Típico:</strong> Sim, a conduta de "lesionar" se amolda ao crime de lesão corporal (art. 129 do CP). Como o primeiro degrau foi alcançado, podemos subir. <strong>2) Ilicitude:</strong> Não, o fato não é ilícito. O médico agiu no exercício regular de direito. A análise para aqui. Não se chega a perguntar sobre a culpabilidade do médico, pois sua conduta, embora típica, foi justificada. Não há crime.</p>' +
                '</div>' +
                '<p class="mt-3 text-sm text-gray-600"><em>Referência: Aula 16, p. 4</em></p>',
            topic: "A Escada do Crime e a Relação entre os Elementos"
        },
        {
            question: "O fato típico, primeiro e fundamental elemento do crime, é composto por quatro elementos próprios. Assinale a alternativa que os apresenta corretamente.",
            options: [
                "Conduta, Dolo, Culpa e Tipicidade.",
                "Conduta, Resultado, Nexo Causal e Tipicidade.",
                "Ação, Resultado, Ilicitude e Tipicidade.",
                "Conduta, Resultado, Nexo Causal e Culpabilidade.",
                "Tipicidade Formal, Tipicidade Material, Conduta e Resultado."
            ],
            answer: 1,
            explanation:
                '<div class="feedback-explanation">' +
                    '<p><strong>Mini-Aula sobre a Alternativa Correta (B):</strong></p>' +
                    '<p>O Fato Típico é o "molde" legal onde a conduta do agente deve se encaixar. Para que esse encaixe seja perfeito, quatro componentes devem estar presentes (nos crimes materiais):</p>' +
                    '<ul>' +
                        '<li class="mt-2"><strong>1. Conduta:</strong> Ação ou omissão humana, voluntária e finalista (dirigida a um fim).</li>' +
                        '<li class="mt-1"><strong>2. Resultado:</strong> A modificação no mundo exterior provocada pela conduta.</li>' +
                        '<li class="mt-1"><strong>3. Nexo Causal:</strong> O elo, a ligação, que une a conduta ao resultado. É preciso provar que foi a conduta que causou aquele resultado.</li>' +
                        '<li class="mt-1"><strong>4. Tipicidade:</strong> A previsão legal dessa conduta como crime. É a subsunção do fato concreto à norma penal.</li>' +
                    '</ul>' +
                    '<p>Dolo e culpa não são elementos autônomos do fato típico, mas sim integrantes da conduta. Ilicitude e culpabilidade são os outros "degraus" do crime.</p>' +
                '</div>' +
                '<div class="feedback-example">' +
                    '<p><strong>Exemplo Prático:</strong> Um motorista, dirigindo embriagado, avança o sinal vermelho e atropela fatalmente um pedestre. <strong>Conduta:</strong> dirigir o veículo. <strong>Resultado:</strong> morte do pedestre. <strong>Nexo Causal:</strong> a morte foi causada diretamente pelo atropelamento. <strong>Tipicidade:</strong> a conduta se amolda ao tipo penal de homicídio (culposo na direção de veículo automotor, no mínimo). Todos os elementos do fato típico estão presentes.</p>' +
                '</div>' +
                '<p class="mt-3 text-sm text-gray-600"><em>Referência: Aula 16, p. 5</em></p>',
            topic: "Elementos do Fato Típico"
        },
        {
            question: "A teoria bipartida do crime, embora minoritária, é citada no material de estudo. Qual é a principal diferença de sua estrutura em relação à teoria tripartida?",
            options: [
                "A teoria bipartida não considera o fato típico como elemento do crime.",
                "Na teoria bipartida, a ilicitude é analisada como um pressuposto de aplicação da pena, e não como elemento do crime.",
                "A teoria bipartida funde o fato típico e a ilicitude em um único elemento chamado 'tipo de injusto'.",
                "Na teoria bipartida, a culpabilidade não é um elemento do crime, mas sim um pressuposto para a aplicação da pena.",
                "A teoria bipartida inclui a punibilidade como terceiro elemento do crime."
            ],
            answer: 3,
            explanation:
                '<div class="feedback-explanation">' +
                    '<p><strong>Mini-Aula sobre a Alternativa Correta (D):</strong></p>' +
                    '<p>A divergência central entre as teorias <strong>tripartida</strong> e <strong>bipartida</strong> reside na natureza jurídica da <strong>culpabilidade</strong>.</p>' +
                    '<ul>' +
                        '<li class="mt-2"><strong>- Teoria Tripartida (majoritária):</strong> Crime = Fato Típico + Ilicitude + <strong>Culpabilidade</strong>. A culpabilidade é o terceiro e último elemento do crime. Sem ela, não há crime.</li>' +
                        '<li class="mt-1"><strong>- Teoria Bipartida (minoritária):</strong> Crime = Fato Típico + Ilicitude. Para esta teoria, a culpabilidade não integra o conceito de crime, mas funciona como um juízo de reprovação posterior, sendo um <strong>pressuposto para que a pena possa ser aplicada</strong> a um fato que já é considerado crime (típico e ilícito).</li>' +
                    '</ul>' +
                     '<p>O material aponta que o próprio Código Penal parece se aproximar dessa teoria em alguns momentos, como ao prever a \'isenção de pena\' para causas que excluem a culpabilidade, sugerindo que o crime existe, mas a pena não é aplicada.</p>' +
                '</div>' +
                '<div class="feedback-example">' +
                    '<p><strong>Exemplo Prático:</strong> Um gerente de banco, sob coação moral irresistível (ameaça de morte a sua família), abre o cofre para ladrões. Para a <strong>teoria tripartida</strong>, a coação exclui a culpabilidade, e se não há culpabilidade, não há crime. Para a <strong>teoria bipartida</strong>, o fato (subtração) é típico e ilícito (portanto, é crime), mas o gerente não receberá pena, pois a culpabilidade, como pressuposto de punição, está ausente.</p>' +
                '</div>' +
                '<p class="mt-3 text-sm text-gray-600"><em>Referência: Aula 16, p. 2-3</em></p>',
            topic: "Diferença entre Teoria Tripartida e Bipartida"
        }
    ];

    const userAnswers = new Array(questions.length).fill(null);
    const quizContainer = document.getElementById('quiz-section');
    const reportSection = document.getElementById('report-section');
    let performanceChart = null;

    function renderQuestions() {
        let quizHTML = '';
        questions.forEach((q, index) => {
            quizHTML += `
                <div class="question-card" id="question-${index}">
                    <p class="question-title">${index + 1}. ${q.question}</p>
                    <div class="options-container">
            `;
            q.options.forEach((option, optionIndex) => {
                quizHTML += `
                    <div class="option" data-question="${index}" data-option="${optionIndex}">
                        <span class="option-letter">${String.fromCharCode(65 + optionIndex)}</span>
                        <span class="option-text">${option}</span>
                        <i class="fas fa-cut scissor-icon" title="Eliminar alternativa"></i>
                    </div>
                `;
            });
            quizHTML += `
                    </div>
                    <div class="feedback" id="feedback-${index}"></div>
                </div>
            `;
        });
        quizContainer.innerHTML = quizHTML;
        addEventListeners();
    }

    function addEventListeners() {
        document.querySelectorAll('.option').forEach(option => {
            option.addEventListener('click', handleOptionSelect);
        });
        document.querySelectorAll('.scissor-icon').forEach(icon => {
            icon.addEventListener('click', handleEliminateOption);
        });
    }

    function handleEliminateOption(e) {
        e.stopPropagation();
        const optionDiv = e.target.parentElement;
        if (!optionDiv.classList.contains('eliminated') && userAnswers[optionDiv.dataset.question] === null) {
            optionDiv.classList.add('eliminated');
        }
    }

    function handleOptionSelect(e) {
        const selectedOption = e.currentTarget;
        const questionIndex = parseInt(selectedOption.dataset.question);
        const optionIndex = parseInt(selectedOption.dataset.option);

        if (userAnswers[questionIndex] !== null || selectedOption.classList.contains('eliminated')) {
            return;
        }

        const isCorrect = optionIndex === questions[questionIndex].answer;
        userAnswers[questionIndex] = { answered: optionIndex, correct: isCorrect };

        const optionsContainer = selectedOption.parentElement;
        optionsContainer.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));

        selectedOption.classList.add(isCorrect ? 'correct' : 'incorrect');
        
        optionsContainer.querySelectorAll('.scissor-icon').forEach(icon => icon.style.display = 'none');

        showFeedback(questionIndex, isCorrect);
        
        if (userAnswers.every(answer => answer !== null)) {
            reportSection.classList.remove('hidden');
            generateReport();
            scrollToSection('report-section');
        }
    }

    function showFeedback(questionIndex, isCorrect) {
        const feedbackDiv = document.getElementById(`feedback-${questionIndex}`);
        const questionData = questions[questionIndex];
        
        let feedbackHTML = `
            <p class="feedback-title">${isCorrect ? 'Resposta Correta! Análise do Professor:' : 'Resposta Incorreta. Análise do Professor:'}</p>
            <div>${questionData.explanation}</div>
        `;
        
        feedbackDiv.innerHTML = feedbackHTML;
        feedbackDiv.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
    }
    
    function generateReport() {
        const correctAnswers = userAnswers.filter(a => a.correct).length;
        const incorrectAnswers = questions.length - correctAnswers;

        const ctx = document.getElementById('performance-chart').getContext('2d');
        if (performanceChart) {
            performanceChart.destroy();
        }
        performanceChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Acertos', 'Erros'],
                datasets: [{
                    data: [correctAnswers, incorrectAnswers],
                    backgroundColor: ['var(--success-green)', 'var(--error-red)'],
                    borderColor: ['var(--white)'],
                    borderWidth: 4
                }]
            },
            options: {
                responsive: true,
                cutout: '70%',
                plugins: {
                    legend: { position: 'bottom', labels: { font: { size: 14 }, padding: 20 } },
                    title: { display: true, text: 'Seu Desempenho Geral', font: { size: 18, weight: 'bold' }, padding: { bottom: 20 } }
                }
            }
        });

        const reviewSection = document.getElementById('review-section');
        let reviewHTML = `<h3 class="text-xl font-bold mb-4 text-[var(--primary-blue)]">Pontos para Revisão</h3>`;
        const incorrectQuestions = userAnswers
            .map((answer, index) => ({...answer, index}))
            .filter(answer => !answer.correct);

        if (incorrectQuestions.length === 0) {
            reviewHTML += `<p class="text-lg text-[var(--success-green)] font-semibold">Excelente! Você dominou todos os conceitos fundamentais do Fato Típico. Prossiga com essa dedicação.</p>`;
        } else {
            reviewHTML += `<p class="mb-4 text-[var(--dark-gray)]">Você errou ${incorrectQuestions.length} questão(ões). Revise com atenção os seguintes tópicos para fortalecer sua base:</p>`;
            incorrectQuestions.forEach(q => {
                const originalQuestion = questions[q.index];
                reviewHTML += `
                    <div class="review-card">
                        <h4 class="font-bold text-lg mb-2 text-[#D97706]">${originalQuestion.topic}</h4>
                        <p class="mb-3"><strong>Na questão:</strong> "${originalQuestion.question}"</p>
                        <p class="font-semibold">Relembre o ponto-chave:</p>
                        ${originalQuestion.explanation}
                    </div>
                `;
            });
        }
        reviewSection.innerHTML = reviewHTML;
    }

    function scrollToSection(sectionId) {
        document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
    }

    window.addEventListener('scroll', () => {
        const sections = ['quiz-section', 'report-section'];
        let currentSection = '';

        sections.forEach(sectionId => {
            const section = document.getElementById(sectionId);
            if (section) {
                const rect = section.getBoundingClientRect();
                if (rect.top <= 150 && rect.bottom >= 150) {
                    currentSection = sectionId;
                }
            }
        });
        
        const sidebarLinks = document.querySelectorAll('#sidebar ul li a');
        sidebarLinks.forEach(link => {
            link.classList.remove('active');
            if(link.getAttribute('href') === `#${currentSection}`) {
                link.classList.add('active');
            }
        });
    });

    document.addEventListener('DOMContentLoaded', renderQuestions);
    </script>

</body>
</html>
